# 17. ìš´ì˜ ë° ë°°í¬

## JAR ë°°í¬ / WAR ë°°í¬

Spring BootëŠ” ìœ ì—°í•œ **ë°°í¬ ì˜µì…˜**ì„ ì œê³µí•œë‹¤.
 ì£¼ìš” ë°©ì‹ìœ¼ë¡œëŠ” **Executable JAR(ë…ë¦½ ì‹¤í–‰í˜• JAR)** ì™€ **WAR(Web Application Archive)** ë‘ ê°€ì§€ê°€ ìˆë‹¤.

ê° ë°©ì‹ì€ **ìš´ì˜ í™˜ê²½**ê³¼ **ê¸°ì¡´ ì¸í”„ë¼**ì— ë”°ë¼ ì„ íƒí•˜ê²Œ ë˜ë©°, ê°ê°ì˜ íŠ¹ì„±ê³¼ ì¥ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.

------

### 1ï¸âƒ£ ê°œìš”

| ë°°í¬ ë°©ì‹ | íŠ¹ì§•                                                         |
| --------- | ------------------------------------------------------------ |
| JAR ë°°í¬  | ìì²´ ë‚´ì¥ í†°ìº£(Tomcat)/Jetty/Undertow í¬í•¨, ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥   |
| WAR ë°°í¬  | ì™¸ë¶€ WAS(Web Application Server)ì— ë°°í¬ â†’ Tomcat, WebLogic ë“± |

------

### 2ï¸âƒ£ JAR ë°°í¬ ğŸ“¦

#### íŠ¹ì§•

- **Spring Bootì˜ ê¸°ë³¸ ë°°í¬ ë°©ì‹** â†’ Embedded Servlet Container(ë‚´ì¥ í†°ìº£ ë“±)ë¥¼ í¬í•¨í•œ **ë…ë¦½ ì‹¤í–‰í˜• ì• í”Œë¦¬ì¼€ì´ì…˜**.
- ë³„ë„ì˜ ì™¸ë¶€ WAS ì„¤ì¹˜/êµ¬ì„±ì´ í•„ìš” ì—†ìŒ.
- `java -jar` ëª…ë ¹ì–´ë¡œ ì‰½ê²Œ ì‹¤í–‰ ê°€ëŠ¥ â†’ Cloud Native, Container ê¸°ë°˜ í™˜ê²½ì— ì í•© ğŸš€.

#### Build ì„¤ì • ì˜ˆì‹œ (Gradle)

```
plugins {
    id 'org.springframework.boot' version '3.2.4'
    id 'io.spring.dependency-management' version '1.1.4'
    id 'java'
}

bootJar {
    enabled = true
}

bootWar {
    enabled = false
}
```

#### ì‹¤í–‰ ëª…ë ¹

```
java -jar myapp.jar
```

#### ì£¼ìš” ì¥ì 

 âœ… ê°„ë‹¨í•œ ë°°í¬/ì‹¤í–‰ â†’ ìš´ì˜ í™˜ê²½ ë‹¨ìˆœí™”
 âœ… DevOps, Kubernetes, Docker ê¸°ë°˜ í™˜ê²½ì— ìµœì í™”
 âœ… ëª¨ë“  ì˜ì¡´ì„± í¬í•¨ â†’ ë°°í¬ ì•„í‹°íŒ©íŠ¸ ê´€ë¦¬ ìš©ì´

#### ì£¼ìš” ë‹¨ì 

âŒ ì™¸ë¶€ WAS í™˜ê²½ì— í†µí•© í•„ìš” ì‹œ ì í•©í•˜ì§€ ì•ŠìŒ (ê¸°ì—… ë ˆê±°ì‹œ WAS ìš”êµ¬ ì‹œ í•œê³„ ì¡´ì¬)

------

### 3ï¸âƒ£ WAR ë°°í¬ ğŸ›ï¸

#### íŠ¹ì§•

- ê¸°ì¡´ **WAS(Tomcat, WebLogic, JBoss ë“±)** ì— ë°°í¬ ê°€ëŠ¥í•œ í‘œì¤€ Web Application Archive.
- `ServletContainerInitializer` ê¸°ë°˜ìœ¼ë¡œ Spring Boot ì´ˆê¸°í™” ê°€ëŠ¥.
- **ë‚´ì¥ í†°ìº£ ì‚¬ìš© ì•ˆí•¨** â†’ ì™¸ë¶€ WASì˜ Lifecycleì— ë”°ë¼ êµ¬ë™.

#### Build ì„¤ì • ì˜ˆì‹œ (Gradle)

```
plugins {
    id 'org.springframework.boot' version '3.2.4'
    id 'io.spring.dependency-management' version '1.1.4'
    id 'war'
    id 'java'
}

bootJar {
    enabled = false
}

bootWar {
    enabled = true
}
```

#### Application í´ë˜ìŠ¤ êµ¬ì„±

```
@SpringBootApplication
public class MyApplication extends SpringBootServletInitializer {

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(MyApplication.class);
    }

    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

#### WAR ë°°í¬ ì‹œ ì‚¬ìš© ì˜ˆì‹œ

- Tomcat 9+ `/webapps` ë””ë ‰í† ë¦¬ì— `myapp.war` ë°°í¬
- WebLogic, WebSphere í™˜ê²½ì— í†µí•© ë°°í¬

#### ì£¼ìš” ì¥ì 

 âœ… ê¸°ì¡´ ê¸°ì—…ìš© **ì „í†µì  WAS ì¸í”„ë¼ì— í˜¸í™˜ì„±** ìš°ìˆ˜
 âœ… **ë ˆê±°ì‹œ ì‹œìŠ¤í…œê³¼ í†µí•© ë°°í¬** í•„ìš” ì‹œ í™œìš© ê°€ëŠ¥

#### ì£¼ìš” ë‹¨ì 

 âŒ WAS ì„¤ì¹˜/ìš´ì˜ ê´€ë¦¬ í•„ìš” â†’ DevOps íë¦„ì—ëŠ” ì í•©ì„± ë–¨ì–´ì§
 âŒ ì™¸ë¶€ WAS í™˜ê²½ ì¢…ì†ì„± ì¡´ì¬ â†’ ì™„ì „í•œ Cloud Native ì•„í‚¤í…ì²˜ì— ë¶€ì í•©

------

### 4ï¸âƒ£ ë¹„êµí‘œ ğŸ—‚ï¸

| í•­ëª©              | JAR ë°°í¬                           | WAR ë°°í¬                     |
| ----------------- | ---------------------------------- | ---------------------------- |
| ë°°í¬ ë°©ì‹         | `java -jar` ì‹¤í–‰í˜• JAR             | ì™¸ë¶€ WAS ë°°í¬ìš© WAR          |
| ë‚´ì¥ ì„œë²„         | Tomcat, Jetty, Undertow í¬í•¨       | ì—†ìŒ (ì™¸ë¶€ WAS í•„ìš”)         |
| ì‹¤í–‰ ë…ë¦½ì„±       | ì™„ì „ ë…ë¦½ì  ì‹¤í–‰ ê°€ëŠ¥              | ì™¸ë¶€ WAS ì¢…ì†                |
| ìš´ì˜ í™˜ê²½         | Cloud, Kubernetes, Dockerì— ìµœì í™” | ê¸°ì—… ë ˆê±°ì‹œ ì¸í”„ë¼ í™˜ê²½      |
| DevOps ì¹œí™”ì„±     | ë§¤ìš° ìš°ìˆ˜                          | ë‚®ìŒ                         |
| ë°°í¬ ë³µì¡ë„       | ë§¤ìš° ë‹¨ìˆœ                          | ìƒëŒ€ì ìœ¼ë¡œ ë³µì¡              |
| ì—…ê·¸ë ˆì´ë“œ ìš©ì´ì„± | ìì²´ ê´€ë¦¬ ê°€ëŠ¥                     | ì™¸ë¶€ WAS ë²„ì „ ì œì•½ ê³ ë ¤ í•„ìš” |

------

### 5ï¸âƒ£ ì„ íƒ ê°€ì´ë“œ ğŸ¯

| ìƒí™©                                          | ê¶Œì¥ ë°©ì‹     |
| --------------------------------------------- | ------------- |
| ì‹ ê·œ ì„œë¹„ìŠ¤ ê°œë°œ, í´ë¼ìš°ë“œ ìš´ì˜               | JAR ë°°í¬ ê¶Œì¥ |
| Kubernetes ê¸°ë°˜ ë°°í¬                          | JAR ë°°í¬ ê¶Œì¥ |
| ê¸°ì¡´ ê¸°ì—…ìš© WAS (WebLogic, WebSphere ë“±) ì‚¬ìš© | WAR ë°°í¬ í•„ìš” |
| ë ˆê±°ì‹œ ì‹œìŠ¤í…œê³¼ í†µí•© í•„ìš”                     | WAR ë°°í¬ ê³ ë ¤ |
| DevOps ê¸°ë°˜ ìë™í™” ë°°í¬ ì›í•  ê²½ìš°             | JAR ë°°í¬ ìµœì  |

------

### 6ï¸âƒ£ ê²°ë¡  ğŸš€

 âœ… Spring Bootì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ **JAR ë°°í¬ê°€ ê¶Œì¥**ëœë‹¤.
 âœ… JAR ë°°í¬ëŠ” Cloud Native/DevOpsì— ì í•©í•œ ë°©ì‹ìœ¼ë¡œ ìµœì‹  ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìµœì í™”ë˜ì–´ ìˆë‹¤.
 âœ… WAR ë°°í¬ëŠ” ê¸°ì¡´ ë ˆê±°ì‹œ ì¸í”„ë¼(WAS)ì™€ì˜ í˜¸í™˜ì„±ì„ ìœ„í•œ ì˜µì…˜ìœ¼ë¡œ ìœ ì§€ë˜ê³  ìˆìœ¼ë©°, ì¼ë¶€ ëŒ€ê¸°ì—… í™˜ê²½ì—ì„œëŠ” ì—¬ì „íˆ í•„ìš”í•˜ë‹¤.
 âœ… ì„¤ê³„ ì´ˆê¸° ë‹¨ê³„ì—ì„œ **ìš´ì˜ í™˜ê²½/ë°°í¬ ì „ëµ**ì„ ëª…í™•íˆ ì •ì˜í•˜ê³  ì í•©í•œ ë°©ì‹ì„ ì„ íƒí•´ì•¼ í•œë‹¤.

## Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ì‹¤í–‰

Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ì€ **Docker ì»¨í…Œì´ë„ˆ ê¸°ë°˜**ìœ¼ë¡œ ë°°í¬í•˜ë©´ **í™˜ê²½ ì¼ê´€ì„± í™•ë³´**, **ìë™í™”ëœ ë°°í¬**, **í™•ì¥ì„± í™•ë³´** ë“±ì˜ ì´ì ì„ ëˆ„ë¦´ ìˆ˜ ìˆë‹¤.
 Docker ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆë‹¤:

- Dockerfile ì‘ì„± â†’ ëª…ì‹œì  ì´ë¯¸ì§€ êµ¬ì„±
- Spring Boot Buildpack ì‚¬ìš© â†’ ìë™ ì´ë¯¸ì§€ ë¹Œë“œ

ì´ë²ˆ ì ˆì—ì„œëŠ” ë‘ ê°€ì§€ ë°©ë²• ëª¨ë‘ ì„¤ëª…í•œë‹¤.

------

### 1ï¸âƒ£ ì‚¬ì „ ì¤€ë¹„

- **Docker Desktop / Docker CLI ì„¤ì¹˜** â†’ `docker --version` í™•ì¸
- Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ JAR ë¹Œë“œ ê°€ëŠ¥ ìƒíƒœ í™•ë³´ â†’ `./gradlew build` ë˜ëŠ” `./mvnw package`

------

### 2ï¸âƒ£ Dockerfile ì‘ì„±ë²• ğŸ“

#### ê¸°ë³¸ Dockerfile ì˜ˆì‹œ

```
# 1ï¸âƒ£ ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì„¤ì • (Java 17 ì˜ˆì‹œ)
FROM eclipse-temurin:17-jdk-alpine

# 2ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENV TZ=Asia/Seoul
ENV JAVA_OPTS=""

# 3ï¸âƒ£ JAR íŒŒì¼ ë³µì‚¬
COPY build/libs/myapp.jar app.jar

# 4ï¸âƒ£ ì‹¤í–‰ ëª…ë ¹
ENTRYPOINT ["sh", "-c", "java $JAVA_OPTS -jar /app.jar"]
```

#### êµ¬ì„± ì„¤ëª…

| ë‹¨ê³„       | ì„¤ëª…                                 |
| ---------- | ------------------------------------ |
| FROM       | ê²½ëŸ‰í™”ëœ JDK ê¸°ë°˜ ì´ë¯¸ì§€ ì‚¬ìš©        |
| ENV        | íƒ€ì„ì¡´, JVM ì˜µì…˜ ë“± ì„¤ì • ê°€ëŠ¥        |
| COPY       | ë¹Œë“œëœ JAR íŒŒì¼ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ë³µì‚¬ |
| ENTRYPOINT | ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ëª…ë ¹               |

------

### 3ï¸âƒ£ Docker ì´ë¯¸ì§€ ë¹Œë“œ

```
docker build -t myapp:1.0 .
```

- `-t myapp:1.0` â†’ ì´ë¯¸ì§€ ì´ë¦„ê³¼ íƒœê·¸ ì§€ì •
- `.` â†’ í˜„ì¬ ë””ë ‰í† ë¦¬ ê¸°ì¤€ìœ¼ë¡œ Dockerfile ì½ê¸°

ì´ë¯¸ì§€ ë¹Œë“œ í™•ì¸:

```
docker images
```

------

### 4ï¸âƒ£ Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ğŸš€

```
docker run -d -p 8080:8080 --name myapp-container myapp:1.0
```

| ì˜µì…˜      | ì„¤ëª…                             |
| --------- | -------------------------------- |
| -d        | ë°±ê·¸ë¼ìš´ë“œ(detached) ëª¨ë“œë¡œ ì‹¤í–‰ |
| -p        | í˜¸ìŠ¤íŠ¸ í¬íŠ¸:ì»¨í…Œì´ë„ˆ í¬íŠ¸ ë§¤í•‘   |
| --name    | ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •               |
| myapp:1.0 | ì‚¬ìš©í•  ì´ë¯¸ì§€                    |

##### ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸:

```
docker ps
```

##### ë¡œê·¸ í™•ì¸:

```
docker logs myapp-container
```

##### ì •ì§€:

```
docker stop myapp-container
```

##### ì‚­ì œ:

```
docker rm myapp-container
```

------

### 5ï¸âƒ£ Buildpack ì´ìš© ìë™ ì´ë¯¸ì§€ ë¹Œë“œ ğŸ—ï¸

Spring Boot 2.3+ ë¶€í„°ëŠ” **Buildpack ê¸°ë°˜ Docker ì´ë¯¸ì§€ ë¹Œë“œ**ë¥¼ ì§€ì›í•œë‹¤ (Gradle ì‚¬ìš© ì‹œ ì˜ˆì‹œ).

```
./gradlew bootBuildImage --imageName=myapp:1.0
```

#### ì¥ì 

 âœ… Dockerfile ì—†ì´ ë°”ë¡œ ì´ë¯¸ì§€ ìƒì„± ê°€ëŠ¥
 âœ… Layer ìµœì í™” ìë™ ì ìš©
 âœ… Spring ê³µì‹ ì§€ì› â†’ ì•ˆì •ì„± â†‘

##### ìƒì„±ëœ ì´ë¯¸ì§€ í™•ì¸:

```
docker images
```

##### ì‹¤í–‰ ë™ì¼:

```
docker run -d -p 8080:8080 --name myapp-container myapp:1.0
```

#### build.gradle ì„¤ì • ì˜ˆì‹œ

```
bootJar {
    enabled = true
}

bootBuildImage {
    imageName = 'myapp:1.0'
}
```

ğŸ‘‰ `bootBuildImage`ëŠ” **ì¶”ê°€ ì„¤ì • ì—†ì´** Spring Boot + Buildpack ê¸°ë°˜ ìµœì í™”ëœ ì´ë¯¸ì§€ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤€ë‹¤ ğŸš€.

------

### 6ï¸âƒ£ ë¹„êµí‘œ ğŸ—‚ï¸

| ë°©ë²•                              | íŠ¹ì§•                        | ì¶”ì²œ ì‚¬ìš© ìƒí™©                        |
| --------------------------------- | --------------------------- | ------------------------------------- |
| Dockerfile ì§ì ‘ ì‘ì„±              | ììœ ë¡œìš´ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥  | ìµœì í™”ëœ ì»¤ìŠ¤í…€ ì´ë¯¸ì§€ í•„ìš” ì‹œ        |
| Buildpack ì‚¬ìš© (`bootBuildImage`) | ë§¤ìš° ê°„í¸, Spring ê³µì‹ ì§€ì› | í‘œì¤€ Spring Boot ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆí™” ì‹œ |

------

### 7ï¸âƒ£ ìµœì í™” íŒ ğŸ’¡

- **ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ í™œìš©** â†’ ë¹Œë“œ ë‹¨ê³„ì™€ ì‹¤í–‰ ë‹¨ê³„ ë¶„ë¦¬ë¡œ ì´ë¯¸ì§€ ê²½ëŸ‰í™” ê°€ëŠ¥.
- **Layer cache í™œìš©** â†’ ì˜ì¡´ì„± ë³€ê²½ ì—†ëŠ” ê²½ìš° ë¹ ë¥¸ ë¹Œë“œ ê°€ëŠ¥.
- **ìµœì†Œ base image ì‚¬ìš©** â†’ `eclipse-temurin` ë˜ëŠ” `distroless/java` ì‚¬ìš© ê¶Œì¥.

#### ë©€í‹° ìŠ¤í…Œì´ì§€ ì˜ˆì‹œ

```
# Build Stage
FROM gradle:7.5-jdk17 AS builder
COPY --chown=gradle:gradle . /home/gradle/project
WORKDIR /home/gradle/project
RUN gradle build --no-daemon

# Run Stage
FROM eclipse-temurin:17-jre-alpine
COPY --from=builder /home/gradle/project/build/libs/myapp.jar app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

ğŸ‘‰ Build ë‹¨ê³„ëŠ” Gradle ì´ë¯¸ì§€ ì‚¬ìš©, Run ë‹¨ê³„ëŠ” ê²½ëŸ‰ JRE ì‚¬ìš© â†’ ì´ë¯¸ì§€ ìš©ëŸ‰ ìµœì†Œí™” ğŸš€.

------

### ê²°ë¡  ğŸ—‚ï¸

 âœ… Spring BootëŠ” Docker ì´ë¯¸ì§€ ë¹Œë“œ/ë°°í¬ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ë°©ë²•ì„ ì œê³µí•œë‹¤.
 âœ… Buildpack ì‚¬ìš© ì‹œ ë¹ ë¥´ê²Œ í‘œì¤€ ì´ë¯¸ì§€ ìƒì„± ê°€ëŠ¥ â†’ DevOps í™˜ê²½ì— ì í•©.
 âœ… Dockerfile ì§ì ‘ ì‘ì„± ì‹œ ê³ ë„í™”ëœ ìµœì í™” ë° ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥.
 âœ… Container ê¸°ë°˜ ë°°í¬ í™˜ê²½(Kubernetes ë“±)ì—ì„œëŠ” ë°˜ë“œì‹œ `docker build â†’ docker push â†’ deploy` íë¦„ì„ í‘œì¤€í™”í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

## CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions, Jenkins)

(GitHub Actions & Jenkins ê¸°ë°˜)

**CI/CD(Continuous Integration / Continuous Delivery or Deployment)** ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì—ì„œ **ìë™í™”ëœ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ íŒŒì´í”„ë¼ì¸**ì„ êµ¬ì„±í•˜ì—¬ **ê°œë°œ ì†ë„**ì™€ **ì„œë¹„ìŠ¤ í’ˆì§ˆ**ì„ ë™ì‹œì— í–¥ìƒì‹œí‚¤ëŠ” í•„ìˆ˜ì ì¸ ì „ëµì´ë‹¤.

ì´ë²ˆ ì ˆì—ì„œëŠ” **GitHub Actions**ì™€ **Jenkins** ê¸°ë°˜ìœ¼ë¡œ ëŒ€í‘œì ì¸ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ **CI/CD êµ¬ì„±ë²•**ì„ ì„¤ëª…í•œë‹¤.

------

### 1ï¸âƒ£ ì „ì²´ êµ¬ì„± íë¦„

```
ê°œë°œì Push / Pull Request
    â†“
CI ë‹¨ê³„ (Build, Test, Lint, SonarQube ë“±)
    â†“
CD ë‹¨ê³„ (Docker Build â†’ Registry Push â†’ Deploy)
    â†“
ìš´ì˜ í™˜ê²½ ìë™ ë°˜ì˜ or ìŠ¹ì¸ ê¸°ë°˜ ë°˜ì˜
```

------

### 2ï¸âƒ£ GitHub Actions êµ¬ì„± ğŸš€

#### ê¸°ë³¸ ê°œë…

- GitHub ì œê³µ **Workflow ê¸°ë°˜ CI/CD ì„œë¹„ìŠ¤**
- `.github/workflows/*.yml` ì— íŒŒì´í”„ë¼ì¸ ì •ì˜
- Github-hosted Runner ì‚¬ìš© ê°€ëŠ¥ (Ubuntu, Windows, macOS)

#### ê¸°ë³¸ Workflow ì˜ˆì‹œ

```
# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        distribution: 'temurin'
        java-version: '17'

    - name: Build with Gradle
      run: ./gradlew build

    - name: Docker Build
      run: docker build -t myapp:${{ github.sha }} .

    - name: Docker Push
      env:
        DOCKER_USER: ${{ secrets.DOCKER_USER }}
        DOCKER_PASSWORD: ${{ secrets.DOCKER_PASSWORD }}
      run: |
        echo $DOCKER_PASSWORD | docker login -u $DOCKER_USER --password-stdin
        docker tag myapp:${{ github.sha }} myrepo/myapp:latest
        docker push myrepo/myapp:latest
```

#### êµ¬ì„± ì„¤ëª…

âœ… **CI ë‹¨ê³„**:

- ì½”ë“œ Checkout â†’ Build â†’ Test â†’ Docker Build
   âœ… **CD ë‹¨ê³„**:
- Docker Registry(ì˜ˆ: Docker Hub, AWS ECR ë“±) Push â†’ ì´í›„ ë°°í¬ ë‹¨ê³„ êµ¬ì„± ê°€ëŠ¥

#### GitHub Actions ì¥ì 

 âœ… GitHub í†µí•© â†’ Pull Request ê¸°ë°˜ ìë™ Trigger ìš©ì´
 âœ… YAML ê¸°ë°˜ ì„ ì–¸ì  êµ¬ì„±
 âœ… Serverless í˜•íƒœ â†’ ìš´ì˜ ì¸í”„ë¼ ë¶ˆí•„ìš”
 âœ… ë¬´ë£Œ tier ì œê³µ (ìš©ëŸ‰ ì œí•œ ìˆìŒ)

#### GitHub Actions í•œê³„

 âŒ ê³ ì • IP ì‚¬ìš© ì–´ë ¤ì›€
 âŒ ë³µì¡í•œ ë°°í¬ ì¸í”„ë¼ êµ¬ì„± ì‹œ í•œê³„ ì¡´ì¬ â†’ ë³„ë„ ë°°í¬ ì„œë²„ í•„ìš”

------

### 3ï¸âƒ£ Jenkins êµ¬ì„± ğŸ›ï¸

#### ê¸°ë³¸ ê°œë…

- **ìì²´ ì„œë²„ì—ì„œ êµ¬ë™ë˜ëŠ” CI/CD ìë™í™” ì„œë²„**
- Job ê¸°ë°˜ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ êµ¬ì„±
- Groovy ê¸°ë°˜ **Declarative Pipeline**, **Scripted Pipeline** ì§€ì›

#### Jenkinsfile ì˜ˆì‹œ (Declarative Pipeline)

```
pipeline {
    agent any

    environment {
        DOCKER_CREDENTIAL_ID = 'docker-hub-credentials'
    }

    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }

        stage('Build') {
            steps {
                sh './gradlew clean build'
            }
        }

        stage('Docker Build & Push') {
            steps {
                script {
                    docker.withRegistry('', DOCKER_CREDENTIAL_ID) {
                        def appImage = docker.build("myrepo/myapp:${env.BUILD_NUMBER}")
                        appImage.push('latest')
                    }
                }
            }
        }

        stage('Deploy') {
            steps {
                sh './scripts/deploy.sh'
            }
        }
    }

    post {
        success {
            echo 'Build, Docker Push & Deploy Success ğŸ‰'
        }
        failure {
            echo 'Build Failed âŒ'
        }
    }
}
```

#### êµ¬ì„± ì„¤ëª…

 âœ… Checkout â†’ Build â†’ Docker Build & Push â†’ Deploy ë‹¨ê³„ êµ¬ì„±
 âœ… Deploy ë‹¨ê³„ëŠ” ë³´í†µ **SSH** ë˜ëŠ” **Kubernetes CLI(kubectl)** ë¥¼ í†µí•´ ë°°í¬ ì§„í–‰.

------

### 4ï¸âƒ£ GitHub Actions vs Jenkins ë¹„êµ

| í•­ëª©           | GitHub Actions                  | Jenkins                                |
| -------------- | ------------------------------- | -------------------------------------- |
| ì„¤ì¹˜ í•„ìš” ì—¬ë¶€ | ë¶ˆí•„ìš” (GitHub ì œê³µ)            | í•„ìš” (Jenkins ì„œë²„ ìš´ì˜ í•„ìš”)          |
| êµ¬ì„± ë°©ë²•      | Workflow(YAML)                  | Jenkinsfile(Groovy)                    |
| í™•ì¥ì„±         | GitHub Marketplace ì œê³µ         | Plugin ê¸°ë°˜ìœ¼ë¡œ ë§¤ìš° ìœ ì—°              |
| Trigger        | GitHub ì´ë²¤íŠ¸ ê¸°ë°˜              | SCM Hook / Timer / Manual ë“± ìœ ì—°      |
| ë¹„ìš©           | GitHub ë¬´ë£Œ tier ì œê³µ           | ìì²´ ì„œë²„ ìš´ì˜ í•„ìš” â†’ ì¸í”„ë¼ ë¹„ìš© ë°œìƒ |
| ì‚¬ìš© ì í•©ì„±    | GitHub ê¸°ë°˜ DevOps êµ¬ì¶• ì‹œ ìœ ë¦¬ | ë³µì¡í•œ ë°°í¬/ì¸í”„ë¼ ê´€ë¦¬ í•„ìš” ì‹œ ìœ ë¦¬   |

------

### 5ï¸âƒ£ CI/CD êµ¬ì„± Best Practice ğŸ

- **Build ë‹¨ê³„**:
  - Lint ê²€ì‚¬ (Checkstyle, SpotBugs ë“±)
  - Unit Test
  - Integration Test
  - SonarQube Code Quality ê²€ì‚¬ (Optional)
- **CD ë‹¨ê³„**:
  - Docker Build
  - Image Registry Push (Docker Hub, AWS ECR ë“±)
  - Deployment (Kubernetes, VM, AWS ECS ë“±)
- **ë³´ì•ˆ ê³ ë ¤**:
  - Docker Push ì‹œ **Secret ê´€ë¦¬ í•„ìˆ˜** (GitHub Secrets or Jenkins Credentials)
  - Build Pipeline ë‚´ **Credential ë…¸ì¶œ ë°©ì§€**
  - Deploy ë‹¨ê³„ëŠ” Production í™˜ê²½ ë³´í˜¸ ì •ì±… ì ìš© (Manual Approval ë“±)

------

### ê²°ë¡  ğŸ—‚ï¸

 âœ… GitHub ActionsëŠ” **ê°„í¸í•œ CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•**ì— ë§¤ìš° ì í•© â†’ GitHub ê¸°ë°˜ DevOps íë¦„ê³¼ ìì—°ìŠ¤ëŸ¬ìš´ í†µí•© ì œê³µ.
 âœ… JenkinsëŠ” **ë³µì¡í•œ Workflow, ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ì˜ í†µí•©**ì´ í•„ìš”í•œ ê²½ìš° ìœ ë¦¬ â†’ ëŒ€ê·œëª¨ ì—”í„°í”„ë¼ì´ì¦ˆ í™˜ê²½ì—ì„œ ì—¬ì „íˆ ë„ë¦¬ ì‚¬ìš©ë¨.
 âœ… ìƒí™©ì— ë”°ë¼ **ë‘ ê°€ì§€ ë°©ë²•ì„ ë³‘í–‰**í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥ â†’ GitHub Actionsë¡œ Build/Test â†’ Jenkinsë¡œ Stageë³„ Deployment êµ¬ì„±.

## ë¬´ì¤‘ë‹¨ ë°°í¬ ì „ëµ

**ë¬´ì¤‘ë‹¨ ë°°í¬**ëŠ” ì„œë¹„ìŠ¤ê°€ ìš´ì˜ ì¤‘ì¸ ìƒíƒœì—ì„œ **ì‚¬ìš©ì ê²½í—˜ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬(ì—…ë°ì´íŠ¸)í•˜ëŠ” ê¸°ë²•**ì´ë‹¤.
 **ê³ ê°€ìš©ì„±(High Availability)** ì‹œìŠ¤í…œì—ì„œëŠ” í•„ìˆ˜ì ì¸ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ê°„ì£¼ëœë‹¤.

ì˜ëª»ëœ ë°°í¬ë¡œ ì¸í•œ **ì„œë¹„ìŠ¤ ì¤‘ë‹¨(502/503 ì˜¤ë¥˜)** ì„ ë°©ì§€í•˜ê³ , ì•ˆì •ì ì¸ ë°°í¬ ì²´ê³„ë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ëª©í‘œë‹¤.

------

### 1ï¸âƒ£ ë¬´ì¤‘ë‹¨ ë°°í¬ì˜ ê¸°ë³¸ ì›ë¦¬

```
í˜„ì¬ íŠ¸ë˜í”½ ì²˜ë¦¬ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ìœ ì§€
    â†“
ìƒˆ ë²„ì „ ì¸ìŠ¤í„´ìŠ¤ ì¤€ë¹„ (Warm-up)
    â†“
íŠ¸ë˜í”½ì„ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì ì§„ì  ì „í™˜
    â†“
ê¸°ì¡´ ë²„ì „ ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ
```

ğŸ‘‰ í•µì‹¬ í¬ì¸íŠ¸ â†’ **íŠ¸ë˜í”½ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” ì „ëµ**ì´ í•„ìš” ğŸš€.

------

### 2ï¸âƒ£ ì£¼ìš” ë¬´ì¤‘ë‹¨ ë°°í¬ ì „ëµ ìœ í˜• ğŸ—‚ï¸

| ì „ëµ                  | íŠ¹ì§•                                                    |
| --------------------- | ------------------------------------------------------- |
| Rolling Update        | ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ êµì²´                         |
| Blue/Green Deployment | ë³„ë„ ìƒˆë¡œìš´ ì¸í”„ë¼ ì¤€ë¹„ â†’ ì „í™˜ ì‹œì  ì œì–´                |
| Canary Deployment     | ì†ŒëŸ‰ íŠ¸ë˜í”½ì„ ìƒˆ ë²„ì „ìœ¼ë¡œ ë¨¼ì € ì „í™˜ í›„ ì ì§„ í™•ëŒ€        |
| Shadow Deployment     | ìƒˆ ë²„ì „ì— íŠ¸ë˜í”½ ë³µì œ í›„ í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ì‚¬ìš©ì ì˜í–¥ ì—†ìŒ) |

------

### 3ï¸âƒ£ Rolling Update ì „ëµ ğŸ”„

#### ê°œë…

- ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•œ ë²ˆì— ì „ë¶€ ë‚´ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **1ê°œì”© ë˜ëŠ” ì¼ì • ë¹„ìœ¨ë§Œ êµì²´**.
- Kubernetes, AWS ECS, ë§ì€ í”Œë«í¼ì—ì„œ ê¸°ë³¸ ì œê³µ.

#### ë™ì‘ íë¦„

```
ì„œë²„ ê·¸ë£¹ Nê°œ ì¤‘ 1ê°œ ì—…ë°ì´íŠ¸ â†’ ì •ìƒ í™•ì¸ â†’ ë‹¤ìŒ 1ê°œ ì—…ë°ì´íŠ¸ ...
```

#### ì¥ì 

 âœ… ì¸í”„ë¼ ì¶”ê°€ í•„ìš” ì—†ìŒ
 âœ… ì ìš©ì´ ê°„ë‹¨í•˜ê³  ë¹ ë¦„

#### ë‹¨ì 

 âŒ ìƒˆ ë²„ì „ê³¼ ê¸°ì¡´ ë²„ì „ ê°„ í˜¸í™˜ì„± ì´ìŠˆ ë°œìƒ ì‹œ ëŒ€ì‘ ë³µì¡
 âŒ DB ë§ˆì´ê·¸ë ˆì´ì…˜ì—ëŠ” ì£¼ì˜ í•„ìš” (Backward Compatibility ì¤‘ìš”)

------

### 4ï¸âƒ£ Blue/Green Deployment ğŸ”µğŸŸ¢

#### ê°œë…

- **í˜„ì¬ í”„ë¡œë•ì…˜(Blue)ì™€ ìƒˆ ë²„ì „(Green)ì„ ë™ì‹œì— ì¤€ë¹„**.
- ì „í™˜ ì‹œì ì— **ë¡œë“œ ë°¸ëŸ°ì„œ ë¼ìš°íŒ…ë§Œ êµì²´**.

#### ë™ì‘ íë¦„

```
Blue í”„ë¡œë•ì…˜ ë™ì‘ ì¤‘
    â†“
Green ìƒˆ ë²„ì „ ë°°í¬ ë° ì¤€ë¹„
    â†“
í…ŒìŠ¤íŠ¸ í›„ Load Balancer â†’ Green ì „í™˜
    â†“
BlueëŠ” Rollback ìš©ë„ë¡œ ì ì‹œ ìœ ì§€
```

#### ì¥ì 

 âœ… ë°°í¬ ì‹¤íŒ¨ ì‹œ ë¹ ë¥¸ ë¡¤ë°± ê°€ëŠ¥
 âœ… DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ ë³„ë„ í…ŒìŠ¤íŠ¸ í›„ ì „í™˜ ê°€ëŠ¥
 âœ… A/B í…ŒìŠ¤íŠ¸ ìš©ë„ë¡œë„ í™œìš© ê°€ëŠ¥

#### ë‹¨ì 

 âŒ ì¸í”„ë¼ ì´ì¤‘ ìœ ì§€ í•„ìš” â†’ ë¹„ìš© ì¦ê°€
 âŒ Pipeline êµ¬ì„± ë³µì¡ë„ ì¦ê°€

------

### 5ï¸âƒ£ Canary Deployment ğŸ¤

#### ê°œë…

- ìƒˆ ë²„ì „ì„ **ì¼ë¶€ ì‚¬ìš©ìì—ê²Œ ë¨¼ì € ì ìš©**í•˜ì—¬ ë¬¸ì œ ì—¬ë¶€ í™•ì¸ í›„ ì ì§„ì  ì „ì²´ ì „í™˜.

#### ë™ì‘ íë¦„

```
10% íŠ¸ë˜í”½ â†’ New Version
    â†“
ë¬¸ì œ ì—†ìŒ í™•ì¸
    â†“
50% íŠ¸ë˜í”½ â†’ New Version
    â†“
100% ì „í™˜
```

#### ì¥ì 

 âœ… ë¦¬ìŠ¤í¬ ìµœì†Œí™” â†’ ì‚¬ìš©ì ì²´ê° ë¬¸ì œ ë°œìƒ ì‹œ ë¹ ë¥¸ ëŒ€ì‘ ê°€ëŠ¥
 âœ… ê¸°ëŠ¥ ë‹¨ìœ„ ë¦´ë¦¬ì¦ˆ ì „ëµ(A/B Test)ê³¼ë„ ê¶í•© ìš°ìˆ˜

#### ë‹¨ì 

âŒ Routing Layerì—ì„œ ì„¸ë°€í•œ íŠ¸ë˜í”½ ì œì–´ í•„ìš” â†’ ì¸í”„ë¼ ë³µì¡ì„± â†‘

------

### 6ï¸âƒ£ Shadow Deployment ğŸ‘¥

#### ê°œë…

- ì‹¤ì‹œê°„ Production íŠ¸ë˜í”½ì„ **ë³µì œ(Shadow)í•˜ì—¬ ìƒˆ ë²„ì „ìœ¼ë¡œ ì „ë‹¬**, ì‹¤ì œ ì‘ë‹µì€ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ.
- ìƒˆë¡œìš´ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±/ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ì— í™œìš©.

#### ë™ì‘ íë¦„

```
ì‹¤ì‚¬ìš© íŠ¸ë˜í”½ â†’ ê¸°ì¡´ ì‹œìŠ¤í…œ ì •ìƒ ì‘ë‹µ
    + ë™ì¼ íŠ¸ë˜í”½ Shadow â†’ New Versionì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ í›„ ê²°ê³¼ ëª¨ë‹ˆí„°ë§
```

#### ì¥ì 

 âœ… Production í™˜ê²½ì—ì„œ ìƒˆ ë²„ì „ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
 âœ… ì‚¬ìš©ì ì˜í–¥ ì—†ìŒ

#### ë‹¨ì 

 âŒ êµ¬í˜„ ë‚œì´ë„ ë†’ìŒ
 âŒ íŠ¸ë˜í”½ ë³µì œ êµ¬ì„± í•„ìš”

------

### 7ï¸âƒ£ ì¼ë°˜ì ì¸ í”Œë«í¼ë³„ êµ¬ì„± ë°©ë²• ğŸš€

| í”Œë«í¼                           | ê¶Œì¥ ì „ëµ                                                    |
| -------------------------------- | ------------------------------------------------------------ |
| Kubernetes                       | Rolling Update ê¸°ë³¸ ì œê³µ, Blue/Green ê°€ëŠ¥ (Ingress/Service í™œìš©), Canary ê°€ëŠ¥ (Argo Rollouts ë“±) |
| AWS ECS                          | Rolling Update ê¸°ë³¸ ì œê³µ, Blue/Green â†’ CodeDeploy + ALB ì‚¬ìš© ê°€ëŠ¥ |
| AWS Elastic Beanstalk            | Rolling Update, Blue/Green ì§€ì›                              |
| On-Premise (Tomcat + Nginx ë“±)   | Blue/Green êµ¬ì„± ê¶Œì¥, Reverse Proxyì—ì„œ ë‹¨ê³„ì  ì „í™˜ êµ¬í˜„     |
| Service Mesh (Istio, Linkerd ë“±) | Canary, Blue/Green ê³ ê¸‰ íŠ¸ë˜í”½ ì œì–´ ê°€ëŠ¥                     |

------

### 8ï¸âƒ£ ë¬´ì¤‘ë‹¨ ë°°í¬ ì‹œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ âš ï¸

#### DB ë§ˆì´ê·¸ë ˆì´ì…˜

- ë°˜ë“œì‹œ **Backward Compatible** ì„¤ê³„ í•„ìš”
- Rolling Update, Blue/Green ëª¨ë‘ ì ìš© ì‹œ ì£¼ì˜
- **ë¹„íŒŒê´´ì  ë³€ê²½ â†’ ë°ì´í„° Backfill â†’ ì½”ë“œ ë°°í¬ â†’ Schema ë³€ê²½** ë‹¨ê³„ êµ¬ì„± ê¶Œì¥.

#### ì„¸ì…˜ ê´€ë¦¬

- StateLess ì„œë¹„ìŠ¤ êµ¬ì„± ê¶Œì¥ (JWT, External Session Store ë“± ì‚¬ìš©)
- Stateful ì„œë¹„ìŠ¤ëŠ” ì„¸ì…˜ Migration ì „ëµ í•„ìš”.

#### íŠ¸ë˜í”½ ë¶„ì‚° ì œì–´

- Kubernetes Ingress, Istio VirtualService, Nginx ë“±ìœ¼ë¡œ ì„¸ë°€í•œ ë¼ìš°íŒ… êµ¬ì„±.

------

### 9ï¸âƒ£ ê²°ë¡  ğŸ—‚ï¸

 âœ… ë¬´ì¤‘ë‹¨ ë°°í¬ëŠ” **ê³ ê°€ìš©ì„± ì„œë¹„ìŠ¤**ì—ì„œ í•„ìˆ˜ ì „ëµì´ë‹¤.
 âœ… Rolling UpdateëŠ” **ê°€ì¥ ê¸°ë³¸ì ì´ê³  ì‰¬ìš´ ë°©ë²•** â†’ Kubernetes ë“±ì—ì„œ ë§ì´ ì‚¬ìš©.
 âœ… Blue/Greenì€ **ê°•ë ¥í•œ Rollback ë³´ì¥** â†’ ì•ˆì •ì„±ì´ ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ì— ì í•©.
 âœ… CanaryëŠ” **ì ì§„ì  ì „í™˜ ì „ëµ**ìœ¼ë¡œ ë¦¬ìŠ¤í¬ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤.
 âœ… Shadow DeploymentëŠ” ê³ ê¸‰ ì „ëµìœ¼ë¡œ, **ìƒˆ ì‹œìŠ¤í…œ ì•ˆì •ì„± ê²€ì¦**ì— ë§¤ìš° ìœ íš¨í•˜ë‹¤.

## í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬: systemd, supervisor, pm2

(systemd, supervisor, pm2)

ì„œë²„ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ **ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ë¡œ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰**í•˜ê³ ,
 **ìë™ ì¬ì‹œì‘**, **ëª¨ë‹ˆí„°ë§**, **ë¡œê·¸ ê´€ë¦¬** ë“±ì„ ìˆ˜í–‰í•˜ë ¤ë©´ ë³„ë„ì˜ **í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ë„êµ¬**ê°€ í•„ìš”í•˜ë‹¤.

ì´ë²ˆ ì ˆì—ì„œëŠ” ëŒ€í‘œì ì¸ 3ê°€ì§€ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ ë„êµ¬:

- **systemd** (Linux ê¸°ë³¸ ì„œë¹„ìŠ¤ ê´€ë¦¬ì)
- **supervisor** (ë²”ìš© í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì)
- **pm2** (Node.js ê¸°ë°˜ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì â†’ ë²”ìš© ì‚¬ìš© ê°€ëŠ¥)

ë¥¼ ë¹„êµí•˜ê³  êµ¬ì„±ë²•ì„ ì„¤ëª…í•œë‹¤.

------

### 1ï¸âƒ£ systemd ğŸ›ï¸

#### ê°œìš”

- **Linux í‘œì¤€ ì„œë¹„ìŠ¤ ê´€ë¦¬ í”„ë ˆì„ì›Œí¬** â†’ ëŒ€ë¶€ë¶„ì˜ ìµœì‹  Linux ë°°í¬íŒì—ì„œ ê¸°ë³¸ ì œê³µ (systemctl ì‚¬ìš©).
- ì„œë¹„ìŠ¤ ë‹¨ìœ„ë¡œ ê´€ë¦¬ (`.service` íŒŒì¼ êµ¬ì„±).
- ë¶€íŒ… ì‹œ ìë™ ì‹œì‘(Enable), ì„œë¹„ìŠ¤ ìƒíƒœ ê´€ë¦¬(Active/Inactive) ê°€ëŠ¥.

#### ê¸°ë³¸ ì‚¬ìš©ë²•

##### ì„œë¹„ìŠ¤ íŒŒì¼ ì‘ì„±

```
# /etc/systemd/system/myapp.service
[Unit]
Description=My Spring Boot App
After=network.target

[Service]
User=ubuntu
WorkingDirectory=/home/ubuntu/myapp
ExecStart=/usr/bin/java -jar myapp.jar
SuccessExitStatus=143
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```

##### ëª…ë ¹ì–´

```
# ì„œë¹„ìŠ¤ ë“±ë¡ í›„ ë¦¬ë¡œë“œ
sudo systemctl daemon-reload

# ì„œë¹„ìŠ¤ ì‹œì‘
sudo systemctl start myapp.service

# ì„œë¹„ìŠ¤ ì¤‘ì§€
sudo systemctl stop myapp.service

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
sudo systemctl status myapp.service

# ë¶€íŒ… ì‹œ ìë™ ì‹œì‘ ì„¤ì •
sudo systemctl enable myapp.service
```

#### ì¥ì 

 âœ… Linux í‘œì¤€ â†’ ì„¤ì¹˜ í•„ìš” ì—†ìŒ
 âœ… ìë™ ì‹œì‘, ì¬ì‹œì‘ ì§€ì›
 âœ… ê°•ë ¥í•œ ë¡œê·¸ ê´€ë¦¬ (`journalctl`) ì§€ì›

#### ë‹¨ì 

 âŒ ì„¤ì • ì‹œ root ê¶Œí•œ í•„ìš”
 âŒ ë¹ ë¥¸ ìˆ˜ì •/ì¬ì‹œì‘ì—ëŠ” ë¶ˆí¸ (config reload í•„ìš”)

------

### 2ï¸âƒ£ Supervisor ğŸ§°

#### ê°œìš”

- **ê²½ëŸ‰í™”ëœ ë²”ìš© í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì** â†’ ì—¬ëŸ¬ í”Œë«í¼ì—ì„œ ì‚¬ìš© ê°€ëŠ¥.
- Python ê¸°ë°˜ â†’ ì„¤ì¹˜ í•„ìš”.
- ê°„ë‹¨í•œ êµ¬ì„± íŒŒì¼ë¡œ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬ ê°€ëŠ¥.

#### ì„¤ì¹˜

```
sudo apt-get install supervisor
```

#### êµ¬ì„± ì˜ˆì‹œ

```
# /etc/supervisor/conf.d/myapp.conf
[program:myapp]
directory=/home/ubuntu/myapp
command=/usr/bin/java -jar myapp.jar
autostart=true
autorestart=true
stderr_logfile=/var/log/myapp.err.log
stdout_logfile=/var/log/myapp.out.log
user=ubuntu
```

#### ëª…ë ¹ì–´

```
# ì„¤ì • ë°˜ì˜
sudo supervisorctl reread
sudo supervisorctl update

# ì„œë¹„ìŠ¤ ì œì–´
sudo supervisorctl start myapp
sudo supervisorctl stop myapp
sudo supervisorctl status myapp
```

#### ì¥ì 

 âœ… ì„¤ì¹˜ì™€ ì„¤ì •ì´ ë§¤ìš° ê°„ë‹¨
 âœ… ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ ë™ì‹œ ê´€ë¦¬ ê°€ëŠ¥
 âœ… ìƒì„¸í•œ ë¡œê·¸ ì„¤ì • ê°€ëŠ¥

#### ë‹¨ì 

 âŒ systemdì™€ ë¹„êµ ì‹œ ì‹œìŠ¤í…œ í‘œì¤€ì€ ì•„ë‹˜
 âŒ ë³„ë„ ì„¤ì¹˜ í•„ìš”

------

### 3ï¸âƒ£ pm2 ğŸ³

#### ê°œìš”

- Node.js ê¸°ë°˜ìœ¼ë¡œ ê°œë°œëœ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬ì â†’ Node.js ë¿ ì•„ë‹ˆë¼ **Java, Python, ê¸°íƒ€ ì‹¤í–‰ íŒŒì¼**ë„ ê´€ë¦¬ ê°€ëŠ¥.
- ê°œë°œì ì¹œí™”ì ì¸ CLI ì œê³µ â†’ ë¹ ë¥¸ ê´€ë¦¬ ê°€ëŠ¥.
- ìƒíƒœ ë° ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ ì œê³µ.

#### ì„¤ì¹˜

```
npm install pm2 -g
```

#### ì‹¤í–‰ ì˜ˆì‹œ

```
# ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
pm2 start myapp.jar --interpreter=java -- --jar

# ë˜ëŠ” (Spring Boot JAR ì‹¤í–‰ ì‹œ)
pm2 start "java -jar myapp.jar" --name myapp
```

#### ì„œë¹„ìŠ¤ ë“±ë¡ (Startup Script ìƒì„± â†’ systemd ì—°ë™ ê°€ëŠ¥)

```
pm2 startup systemd
pm2 save
```

#### í”„ë¡œì„¸ìŠ¤ ì œì–´

```
pm2 list
pm2 restart myapp
pm2 stop myapp
pm2 delete myapp
pm2 logs myapp
```

#### ì¥ì 

 âœ… CLIê°€ ë§¤ìš° ê°•ë ¥í•˜ê³  ì§ê´€ì 
 âœ… ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì‹¤ì‹œê°„ í™•ì¸ ê°€ëŠ¥ (`pm2 monit`)
 âœ… í”Œë«í¼ ë…ë¦½ì  â†’ ê°œë°œ, í…ŒìŠ¤íŠ¸ ì„œë²„ì—ì„œë„ ë™ì¼ êµ¬ì„± ê°€ëŠ¥
 âœ… Log rotation, Cluster mode ì§€ì›

#### ë‹¨ì 

 âŒ Node.js runtime í•„ìš”
 âŒ production Linux í™˜ê²½ì—ì„œëŠ” systemd ë³´ë‹¤ ë‚®ì€ ìš°ì„ ìˆœìœ„ë¡œ ì‚¬ìš©ë¨ (ë‹¤ë§Œ dev/stageì—ì„œëŠ” ìœ ìš©)

------

### 4ï¸âƒ£ ë¹„êµí‘œ ğŸ—‚ï¸

| í•­ëª©           | systemd                     | supervisor                    | pm2                                                          |
| -------------- | --------------------------- | ----------------------------- | ------------------------------------------------------------ |
| ì„¤ì¹˜ í•„ìš” ì—¬ë¶€ | X (ê¸°ë³¸ ì œê³µ)               | O                             | O (npm install)                                              |
| ì£¼ìš” ëŒ€ìƒ      | OS ë ˆë²¨ ì„œë¹„ìŠ¤              | ë²”ìš© í”„ë¡œì„¸ìŠ¤                 | ë²”ìš© í”„ë¡œì„¸ìŠ¤ (Node.js ì¹œí™”ì )                               |
| ë¶€íŒ… ìë™ ì‹œì‘ | O                           | O                             | O (pm2 startup)                                              |
| êµ¬ì„± ë‚œì´ë„    | ë³´í†µ                        | ì‰¬ì›€                          | ë§¤ìš° ì‰¬ì›€                                                    |
| CLI ê´€ë¦¬ ë„êµ¬  | systemctl                   | supervisorctl                 | pm2 CLI                                                      |
| Log ê´€ë¦¬       | journalctl                  | ë³„ë„ íŒŒì¼ ì„¤ì •                | ë‚´ì¥ log ê´€ë¦¬ + rotation ì§€ì›                                |
| ì‚¬ìš© ìš©ë„      | ìš´ì˜ í™˜ê²½, ê³ ì • ì„œë¹„ìŠ¤ ê´€ë¦¬ | dev/stage/ìš´ì˜ ì„œë¹„ìŠ¤ ë‹¤ ê°€ëŠ¥ | dev/stage ì„œë¹„ìŠ¤ì— ì í•©, ìš´ì˜ì—ì„œëŠ” systemd ë³´ì™„ìš©ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥ |

------

### 5ï¸âƒ£ ê²°ë¡  ğŸš€

 âœ… **systemd** â†’ ë¦¬ëˆ…ìŠ¤ ì„œë²„ ìš´ì˜ í™˜ê²½ì—ì„œ **ìš´ì˜ ì„œë¹„ìŠ¤ ë“±ë¡ ë° ê´€ë¦¬ì— í‘œì¤€ì ìœ¼ë¡œ ì‚¬ìš©**.
 âœ… **supervisor** â†’ ë¹ ë¥¸ êµ¬ì„±, ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ ê°„í¸ ê´€ë¦¬ ì‹œ ìœ ìš© (ìš´ì˜/ê°œë°œ ëª¨ë‘ í™œìš© ê°€ëŠ¥).
 âœ… **pm2** â†’ ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ í¸ë¦¬í•˜ë©°, Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ ì™¸ì—ë„ ë²”ìš©ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥.
 â†’ **pm2 + systemd** ì—°ê³„ë„ ê°€ëŠ¥ (pm2 startup systemd).

ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë³´í†µ:

```
ê°œë°œ ë‹¨ê³„ â†’ pm2 ì‚¬ìš©  
Stage í™˜ê²½ â†’ supervisor ë˜ëŠ” pm2  
ìš´ì˜ í™˜ê²½ â†’ systemd ì¤‘ì‹¬ êµ¬ì„±, í•„ìš”í•œ ê²½ìš° supervisor ì—°ê³„
```