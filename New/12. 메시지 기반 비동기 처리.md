# 12. ë©”ì‹œì§€ ê¸°ë°˜ ë¹„ë™ê¸° ì²˜ë¦¬

## Spring Events

Spring EventsëŠ” **ApplicationEventPublisher ê¸°ë°˜ì˜ ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì²˜ë¦¬ ì‹œìŠ¤í…œ**ìœ¼ë¡œ,
 ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ ê°„ **ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì—°í•œ í™•ì¥ì„±**ì„ ì œê³µí•˜ê¸° ìœ„í•œ **Observer íŒ¨í„´** ê¸°ë°˜ì˜ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

Springì—ì„œëŠ” **ì´ë²¤íŠ¸ ë°œí–‰ â†’ ë¦¬ìŠ¤ë„ˆ ìˆ˜ì‹  â†’ ì‘ì—… ì²˜ë¦¬**ì˜ êµ¬ì¡°ë¡œ
 ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ íë¦„ì„ ëŠìŠ¨í•˜ê²Œ ì—°ê²°í•  ìˆ˜ ìˆìœ¼ë©°, **ë™ê¸°/ë¹„ë™ê¸°** ë°©ì‹ ëª¨ë‘ ì§€ì›ë©ë‹ˆë‹¤.

------

### âœ… 1. Spring Events ê°œìš”

| êµ¬ì„± ìš”ì†Œ     | ì„¤ëª…                                                         |
| ------------- | ------------------------------------------------------------ |
| **Event**     | ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ì •ë³´ ê°ì²´ (ì¼ë°˜ POJO ë˜ëŠ” `ApplicationEvent`) |
| **Publisher** | ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ëŠ” ìª½ (`ApplicationEventPublisher`)           |
| **Listener**  | ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ìª½ (`@EventListener`)             |

------

### âœ… 2. ê¸°ë³¸ ì‚¬ìš© êµ¬ì¡°

#### ğŸ“Œ 1. ì´ë²¤íŠ¸ í´ë˜ìŠ¤ ì •ì˜

```
public class UserRegisteredEvent {
    private final Long userId;

    public UserRegisteredEvent(Long userId) {
        this.userId = userId;
    }

    public Long getUserId() {
        return userId;
    }
}
```

> POJO í˜•íƒœë¡œë„ ì¶©ë¶„í•˜ë©°, ë” ì´ìƒ `extends ApplicationEvent`ëŠ” í•„ìš” ì—†ìŒ

------

#### ğŸ“Œ 2. ì´ë²¤íŠ¸ ë°œí–‰

```
@Service
public class UserService {

    private final ApplicationEventPublisher eventPublisher;

    public UserService(ApplicationEventPublisher eventPublisher) {
        this.eventPublisher = eventPublisher;
    }

    public void registerUser(String name) {
        // ì‚¬ìš©ì ë“±ë¡ ë¡œì§...
        Long newUserId = 123L;

        // ì´ë²¤íŠ¸ ë°œí–‰
        eventPublisher.publishEvent(new UserRegisteredEvent(newUserId));
    }
}
```

------

#### ğŸ“Œ 3. ì´ë²¤íŠ¸ ìˆ˜ì‹  ë° ì²˜ë¦¬

```
@Component
public class WelcomeEmailListener {

    @EventListener
    public void handleUserRegistered(UserRegisteredEvent event) {
        System.out.println("íšŒì›ê°€ì… í™˜ì˜ ë©”ì¼ ë°œì†¡: " + event.getUserId());
        // ì´ë©”ì¼ ë°œì†¡ ë¡œì§
    }
}
```

------

### âœ… 3. ë™ê¸° vs ë¹„ë™ê¸° ì²˜ë¦¬

#### ğŸ“Œ ë™ê¸° ì²˜ë¦¬ (ê¸°ë³¸ê°’)

- `publishEvent()` í˜¸ì¶œ â†’ ë¦¬ìŠ¤ë„ˆ ë©”ì„œë“œê°€ **ì¦‰ì‹œ ì‹¤í–‰ë¨**
- ì˜ˆì™¸ ë°œìƒ ì‹œ ë°œí–‰ìì—ê²Œ ì „íŒŒë¨

------

#### ğŸ“Œ ë¹„ë™ê¸° ì²˜ë¦¬

1. `@EnableAsync` í™œì„±í™”

```
@Configuration
@EnableAsync
public class AsyncConfig { }
```

1. ë¦¬ìŠ¤ë„ˆì— `@Async` ì¶”ê°€

```
@Async
@EventListener
public void handleAsync(UserRegisteredEvent event) {
    // ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
}
```

> ì‹¤í–‰ì€ `TaskExecutor` ìŠ¤ë ˆë“œí’€ì—ì„œ ì´ë£¨ì–´ì§

------

### âœ… 4. ë¦¬ìŠ¤ë„ˆ ì¡°ê±´ í•„í„°ë§

```
@EventListener(condition = "#event.userId > 100")
public void handleFiltered(UserRegisteredEvent event) {
    // userIdê°€ 100 ì´ˆê³¼ì¼ ë•Œë§Œ ì‹¤í–‰
}
```

------

### âœ… 5. íŠ¸ëœì­ì…˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ

```
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
public void handleAfterCommit(UserRegisteredEvent event) {
    // íŠ¸ëœì­ì…˜ ì»¤ë°‹ í›„ ì‹¤í–‰ (DB ë°˜ì˜ ì™„ë£Œ ì‹œì )
}
```

| Phase ì˜µì…˜         | ì„¤ëª…                            |
| ------------------ | ------------------------------- |
| `BEFORE_COMMIT`    | ì»¤ë°‹ ì§ì „ì— ì‹¤í–‰                |
| `AFTER_COMMIT`     | ì»¤ë°‹ ì™„ë£Œ í›„ ì‹¤í–‰ (ê°€ì¥ ì¼ë°˜ì ) |
| `AFTER_ROLLBACK`   | ë¡¤ë°± í›„ ì‹¤í–‰                    |
| `AFTER_COMPLETION` | ì»¤ë°‹/ë¡¤ë°± ê´€ê³„ì—†ì´ í•­ìƒ ì‹¤í–‰    |

------

### âœ… 6. ì»¤ìŠ¤í…€ ApplicationEvent ì‚¬ìš© (êµ¬ë²„ì „ ìŠ¤íƒ€ì¼)

```
public class LegacyEvent extends ApplicationEvent {
    public LegacyEvent(Object source) {
        super(source);
    }
}
```

> Spring 4.2 ì´í›„ëŠ” **POJO ì´ë²¤íŠ¸ í´ë˜ìŠ¤**ë¡œ ì¶©ë¶„

------

### âœ… 7. ì‹¤ë¬´ í™œìš© ì˜ˆì‹œ

| ìƒí™©               | ì„¤ëª…                                  |
| ------------------ | ------------------------------------- |
| íšŒì›ê°€ì… í›„ í›„ì²˜ë¦¬ | ì´ë©”ì¼ ë°œì†¡, í¬ì¸íŠ¸ ì§€ê¸‰ ë“±           |
| ì£¼ë¬¸ ì™„ë£Œ ì´ë²¤íŠ¸   | ë©”ì‹œì§€ í ì „ì†¡, ê´€ë¦¬ì ì•Œë¦¼ ë“±        |
| ë¡œê·¸ ìˆ˜ì§‘          | ì´ë²¤íŠ¸ë¡œ ë¹„ë™ê¸° ë¡œê¹… ì²˜ë¦¬             |
| ë„ë©”ì¸ ì´ë²¤íŠ¸      | DDD íŒ¨í„´ ì ìš© ì‹œ Entity â†’ ì´ë²¤íŠ¸ ë°œí–‰ |

------

### âœ… 8. í…ŒìŠ¤íŠ¸ì—ì„œ ì´ë²¤íŠ¸ í™•ì¸

```
@Autowired
private ApplicationEventPublisher publisher;

@Test
void testEvent() {
    publisher.publishEvent(new UserRegisteredEvent(123L));
}
```

- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ `@MockBean` ë˜ëŠ” ë¡œê·¸ë¡œ ê²€ì¦ ê°€ëŠ¥

------

### âœ… 9. ì¥ì  ìš”ì•½

| í•­ëª©              | ì„¤ëª…                                                      |
| ----------------- | --------------------------------------------------------- |
| **ë‚®ì€ ê²°í•©ë„**   | ì„œë¹„ìŠ¤ë¼ë¦¬ ì§ì ‘ ì˜ì¡´í•˜ì§€ ì•Šì•„ë„ ë¨                        |
| **í™•ì¥ ìš©ì´**     | ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë§Œ ì¶”ê°€í•˜ë©´ í›„ì²˜ë¦¬ ê¸°ëŠ¥ í™•ì¥                 |
| **ë¹„ë™ê¸° ì²˜ë¦¬**   | ì‚¬ìš©ëŸ‰ ë§ì€ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰ ê°€ëŠ¥                       |
| **íŠ¸ëœì­ì…˜ ì—°ë™** | `@TransactionalEventListener`ë¡œ DB ì²˜ë¦¬ ì™„ë£Œ í›„ ì‘ì—… ê°€ëŠ¥ |

------

### âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©          | ì„¤ëª…                                                      |
| ------------- | --------------------------------------------------------- |
| ë°œí–‰ì        | `ApplicationEventPublisher.publishEvent()` ì‚¬ìš©           |
| ìˆ˜ì‹ ì        | `@EventListener`, `@Async`, `@TransactionalEventListener` |
| ì´ë²¤íŠ¸ í´ë˜ìŠ¤ | POJO ë˜ëŠ” `ApplicationEvent` ìƒì†                         |
| ê¸°ë³¸ ì‹¤í–‰     | ë™ê¸° ë°©ì‹ (ì˜ˆì™¸ ì „íŒŒ O)                                   |
| ë¹„ë™ê¸° ì‹¤í–‰   | `@EnableAsync` + `@Async` ì‚¬ìš©                            |
| ì‹¤ë¬´ ìš©ë„     | í›„ì²˜ë¦¬ ë¶„ë¦¬, íŠ¸ëœì­ì…˜ í›„ ì²˜ë¦¬, ë¹„ë™ê¸° ì•Œë¦¼ ë“±             |

## ë¹„ë™ê¸° ì²˜ë¦¬: `@Async`, `@EnableAsync`

Springì—ì„œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ê¸°ëŠ¥ì€ `@Async` ì• ë…¸í…Œì´ì…˜ê³¼ `@EnableAsync` ì„¤ì •ì„ í†µí•´
 **ê°„ë‹¨í•˜ê²Œ ë©€í‹°ìŠ¤ë ˆë“œ ê¸°ë°˜ì˜ ë¹„ë™ê¸° ë¡œì§ì„ êµ¬í˜„**í•  ìˆ˜ ìˆë„ë¡ ì§€ì›ë©ë‹ˆë‹¤.
 ì´ëŠ” íŠ¹íˆ **ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…(ì˜ˆ: ì´ë©”ì¼ ë°œì†¡, íŒŒì¼ ì²˜ë¦¬, ì™¸ë¶€ API í˜¸ì¶œ)** ë“±ì„
 **ë³„ë„ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰**í•˜ì—¬ ì‘ë‹µ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

------

### âœ… 1. ê¸°ë³¸ ê°œë…

| í•­ëª©             | ì„¤ëª…                                                         |
| ---------------- | ------------------------------------------------------------ |
| `@Async`         | ë©”ì„œë“œë¥¼ **ë¹„ë™ê¸° ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰**í•˜ë„ë¡ ì§€ì •               |
| `@EnableAsync`   | Spring ë¹„ë™ê¸° ê¸°ëŠ¥ì„ **ì „ì—­ í™œì„±í™”**í•˜ëŠ” ì„¤ì •                |
| ìŠ¤ë ˆë“œ ì‹¤í–‰ ë°©ì‹ | ê¸°ë³¸ì ìœ¼ë¡œ `SimpleAsyncTaskExecutor`, ì‹¤ë¬´ì—ì„  ThreadPool ì„¤ì • ê¶Œì¥ |
| ë°˜í™˜ íƒ€ì…        | `void`, `Future<T>`, `CompletableFuture<T>`, `ListenableFuture<T>` ë“± ê°€ëŠ¥ |

------

### âœ… 2. ê¸°ë³¸ ì‚¬ìš© ë°©ë²•

#### ğŸ“Œ 1. ì„¤ì • í´ë˜ìŠ¤ì— `@EnableAsync` ì¶”ê°€

```
@Configuration
@EnableAsync
public class AsyncConfig { }
```

------

#### ğŸ“Œ 2. ë¹„ë™ê¸°ë¡œ ì‹¤í–‰í•  ë©”ì„œë“œì— `@Async` ì¶”ê°€

```
@Service
public class MailService {

    @Async
    public void sendWelcomeEmail(String email) {
        System.out.println("[ë©”ì¼ ë°œì†¡ ì‹œì‘] Thread: " + Thread.currentThread().getName());

        try {
            Thread.sleep(3000); // ëª¨ì˜ ì§€ì—°
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }

        System.out.println("[ë©”ì¼ ë°œì†¡ ì™„ë£Œ] ìˆ˜ì‹ ì: " + email);
    }
}
```

#### ğŸ“Œ 3. í˜¸ì¶œë¶€ ì˜ˆì‹œ

```
mailService.sendWelcomeEmail("kim@example.com");
```

> `@Async` ë©”ì„œë“œëŠ” **í”„ë¡ì‹œ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘**í•˜ê¸° ë•Œë¬¸ì—
>  ë°˜ë“œì‹œ **ë‹¤ë¥¸ í´ë˜ìŠ¤ì—ì„œ í˜¸ì¶œí•´ì•¼** ì •ìƒ ì‘ë™í•¨

------

### âœ… 3. ë°˜í™˜ê°’ì´ ìˆëŠ” ë¹„ë™ê¸° ë©”ì„œë“œ

```
@Async
public CompletableFuture<String> process() {
    return CompletableFuture.completedFuture("ì²˜ë¦¬ ì™„ë£Œ");
}
```

#### ğŸ“Œ í˜¸ì¶œë¶€ì—ì„œ `get()`ìœ¼ë¡œ ê²°ê³¼ í™•ì¸

```
CompletableFuture<String> result = service.process();
String value = result.get(); // ë¸”ë¡œí‚¹ë¨
```

------

### âœ… 4. ì»¤ìŠ¤í…€ Executor ì„¤ì • (ThreadPoolTaskExecutor)

```
@Configuration
@EnableAsync
public class AsyncConfig {

    @Bean(name = "asyncExecutor")
    public Executor asyncExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(4); // ìµœì†Œ ìŠ¤ë ˆë“œ ìˆ˜
        executor.setMaxPoolSize(10); // ìµœëŒ€ ìŠ¤ë ˆë“œ ìˆ˜
        executor.setQueueCapacity(100); // ëŒ€ê¸° í ìš©ëŸ‰
        executor.setThreadNamePrefix("Async-Thread-");
        executor.initialize();
        return executor;
    }
}
```

------

#### ğŸ“Œ íŠ¹ì • Executorë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ

```
@Async("asyncExecutor")
public void taskA() {
    ...
}
```

------

### âœ… 5. ì˜ˆì™¸ ì²˜ë¦¬

- `void` ë°˜í™˜í˜•ì¸ ê²½ìš° ì˜ˆì™¸ëŠ” í˜¸ì¶œë¶€ì—ì„œ `catch` ë¶ˆê°€
- `CompletableFuture`ë¥¼ ì‚¬ìš©í•˜ë©´ ì˜ˆì™¸ ì „ë‹¬ ê°€ëŠ¥

```
@Async
public CompletableFuture<String> process() {
    try {
        // ì‘ì—… ìˆ˜í–‰
    } catch (Exception e) {
        return CompletableFuture.failedFuture(e);
    }
}
```

------

### âœ… 6. ì‹¤ë¬´ ì˜ˆì‹œ

| ìš©ë„             | ì„¤ëª…                                               |
| ---------------- | -------------------------------------------------- |
| ì´ë©”ì¼ ë°œì†¡      | `sendEmail()`ì„ ë¹„ë™ê¸° ì‹¤í–‰í•˜ì—¬ API ì‘ë‹µ ì†ë„ ê°œì„  |
| ì˜ìƒ/ì´ë¯¸ì§€ ì²˜ë¦¬ | ì—…ë¡œë“œ í›„ ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬                     |
| ë¡œê·¸ ê¸°ë¡        | ì‚¬ìš©ì ìš”ì²­ê³¼ ë³„ê°œë¡œ ë¹„ë™ê¸° ì²˜ë¦¬                   |
| ì™¸ë¶€ API í˜¸ì¶œ    | ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë°œìƒ ì‘ì—… ë¶„ë¦¬                       |

------

### âœ… 7. ì£¼ì˜ì‚¬í•­

| í•­ëª©            | ì„¤ëª…                                                         |
| --------------- | ------------------------------------------------------------ |
| ë‚´ë¶€ í˜¸ì¶œ âŒ     | ê°™ì€ í´ë˜ìŠ¤ ì•ˆì—ì„œ `this.asyncMethod()` â†’ **ë¹„ë™ê¸° ì‘ë™ ì•ˆí•¨** |
| íŠ¸ëœì­ì…˜ê³¼ í˜¼ìš© | `@Transactional` ë‚´ë¶€ì—ì„œ `@Async` í˜¸ì¶œ ì‹œ ì£¼ì˜ (í”„ë¡ì‹œ ë¶„ë¦¬ í•„ìš”) |
| Bean ë“±ë¡ í•„ìˆ˜  | `@EnableAsync`, `ThreadPoolTaskExecutor` ì„¤ì • ê¶Œì¥           |
| í…ŒìŠ¤íŠ¸ ì‹œ       | `@SpringBootTest`ì—ì„œëŠ” `@Async` ì •ìƒ ì‘ë™í•˜ì§€ë§Œ, ë‹¨ìˆœ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ëŠ” ë™ê¸° ì‹¤í–‰ë¨ |

------

### âœ… 8. ë¡œê·¸ ê¸°ë°˜ í™•ì¸ íŒ

```
System.out.println(Thread.currentThread().getName());
```

â†’ ë¹„ë™ê¸° ìŠ¤ë ˆë“œê°€ **Main Threadì™€ ë‹¤ë¥´ë©´ ì •ìƒ ì‘ë™ ì¤‘**

------

### âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©            | ì„¤ëª…                                     |
| --------------- | ---------------------------------------- |
| ë¹„ë™ê¸° ë©”ì„œë“œ   | `@Async`                                 |
| ë¹„ë™ê¸° í™œì„±í™”   | `@EnableAsync`                           |
| ì»¤ìŠ¤í…€ ìŠ¤ë ˆë“œí’€ | `ThreadPoolTaskExecutor`                 |
| ë°˜í™˜ê°’ ì²˜ë¦¬     | `CompletableFuture`, `Future`            |
| ì‹¤ë¬´ ì ìš©       | ì•Œë¦¼, ë¹„ë™ê¸° ì²˜ë¦¬, ì‘ì—… ë¶„ì‚°             |
| ì£¼ì˜ì‚¬í•­        | **í”„ë¡ì‹œ ê¸°ë°˜ ë™ì‘**, ë‚´ë¶€ ë©”ì„œë“œ í˜¸ì¶œ X |

## RabbitMQ / Kafka ì—°ë™

Spring Bootì—ì„œ **RabbitMQ**ì™€ **Kafka**ëŠ” ë©”ì‹œì§€ ê¸°ë°˜ì˜ ë¹„ë™ê¸° í†µì‹ ì„ ìœ„í•´ ìì£¼ ì‚¬ìš©ë˜ëŠ” **ë©”ì‹œì§€ ë¸Œë¡œì»¤**ì…ë‹ˆë‹¤.
 ì´ ë‘˜ì€ ëª©ì ê³¼ íŠ¹ì„±ì´ ë‹¤ë¥´ë©°, Springì—ì„œëŠ” ê°ê°ì„ ìœ„í•œ **ì „ìš© ìŠ¤íƒ€í„°ì™€ ì„¤ì • ë°©ì‹**ì„ ì œê³µí•©ë‹ˆë‹¤.

------

### âœ… RabbitMQ vs Kafka ê°„ë‹¨ ë¹„êµ

| í•­ëª©             | RabbitMQ                                | Kafka                                         |
| ---------------- | --------------------------------------- | --------------------------------------------- |
| ë©”ì‹œì§€ ì²˜ë¦¬ ëª¨ë¸ | **í ê¸°ë°˜ (Message Queue)**             | **ë¡œê·¸ ê¸°ë°˜ (Message Log)**                   |
| ì£¼ìš” ëª©ì         | **ì‘ì—… ë¶„ì‚°, íŠ¸ëœì­ì…˜ ì²˜ë¦¬**            | **ëŒ€ìš©ëŸ‰ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°, ë¡œê·¸ ìˆ˜ì§‘**         |
| ë©”ì‹œì§€ ë³´ê´€      | ì†Œë¹„ë˜ë©´ ì‚­ì œ (ack)                     | ê¸°ë³¸ì ìœ¼ë¡œ ë¡œê·¸ ìœ ì§€ (nì¼)                    |
| ì†Œë¹„ ë°©ì‹        | 1:1 ë˜ëŠ” 1:N (Fanout ë“±)                | 1:N (Consumer Group ë‹¨ìœ„)                     |
| ì‹ ë¢°ì„±           | ê³ ë„í™”ëœ ë©”ì‹œì§€ ë³´ì¥ (ack/nack, ì¬ì „ì†¡) | ë¹ ë¥¸ ì²˜ë¦¬, ë†’ì€ ì²˜ë¦¬ëŸ‰ ìš°ì„                    |
| ëŒ€í‘œ ì‚¬ìš©        | **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ RPC, ì´ë²¤íŠ¸ ì²˜ë¦¬**  | **ë°ì´í„° íŒŒì´í”„ë¼ì¸, ì‹¤ì‹œê°„ ë¶„ì„, ë¡œê·¸ ì²˜ë¦¬** |

------

### âœ… 1. RabbitMQ ì—°ë™ (Spring AMQP)

#### ğŸ“Œ ì˜ì¡´ì„± (Gradle)

```
implementation 'org.springframework.boot:spring-boot-starter-amqp'
```

------

#### ğŸ“Œ application.yml ì„¤ì • ì˜ˆì‹œ

```
spring:
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /
```

------

#### ğŸ“Œ ë©”ì‹œì§€ ì „ì†¡ (Producer)

```
@Service
public class RabbitProducer {

    private final RabbitTemplate rabbitTemplate;

    public RabbitProducer(RabbitTemplate rabbitTemplate) {
        this.rabbitTemplate = rabbitTemplate;
    }

    public void sendMessage(String message) {
        rabbitTemplate.convertAndSend("my.exchange", "my.routing.key", message);
    }
}
```

------

#### ğŸ“Œ ë©”ì‹œì§€ ìˆ˜ì‹  (Consumer)

```
@Component
public class RabbitConsumer {

    @RabbitListener(queues = "my.queue")
    public void receive(String message) {
        System.out.println("RabbitMQ ìˆ˜ì‹ : " + message);
    }
}
```

------

#### ğŸ“Œ Queue/Exchange/Binding ì„¤ì •

```
@Configuration
public class RabbitConfig {

    @Bean
    public Queue queue() {
        return new Queue("my.queue", true);
    }

    @Bean
    public DirectExchange exchange() {
        return new DirectExchange("my.exchange");
    }

    @Bean
    public Binding binding() {
        return BindingBuilder.bind(queue()).to(exchange()).with("my.routing.key");
    }
}
```

------

### âœ… 2. Kafka ì—°ë™ (Spring for Apache Kafka)

#### ğŸ“Œ ì˜ì¡´ì„± (Gradle)

```
implementation 'org.springframework.boot:spring-boot-starter-kafka'
```

------

#### ğŸ“Œ application.yml ì„¤ì • ì˜ˆì‹œ

```
spring:
  kafka:
    bootstrap-servers: localhost:9092
    consumer:
      group-id: my-group
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
```

------

#### ğŸ“Œ ë©”ì‹œì§€ ì „ì†¡ (Producer)

```
@Service
public class KafkaProducer {

    private final KafkaTemplate<String, String> kafkaTemplate;

    public KafkaProducer(KafkaTemplate<String, String> kafkaTemplate) {
        this.kafkaTemplate = kafkaTemplate;
    }

    public void send(String topic, String message) {
        kafkaTemplate.send(topic, message);
    }
}
```

------

#### ğŸ“Œ ë©”ì‹œì§€ ìˆ˜ì‹  (Consumer)

```
@Component
public class KafkaConsumer {

    @KafkaListener(topics = "my-topic", groupId = "my-group")
    public void listen(String message) {
        System.out.println("Kafka ìˆ˜ì‹ : " + message);
    }
}
```

------

### âœ… 3. JSON ë©”ì‹œì§€ ì²˜ë¦¬ ì˜ˆì‹œ (ê°ì²´ ì§ë ¬í™”)

#### Kafka ì„¤ì •

```
spring.kafka:
  producer.value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
  consumer.value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
  consumer.properties.spring.json.trusted.packages: "*"
```

#### Kafka DTO ì „ì†¡

```
public class UserEvent {
    private Long id;
    private String name;
}
```

------

### âœ… 4. ë©”ì‹œì§€ ë³´ì¥ ì „ëµ (ì˜ˆì‹œ)

| ê¸°ëŠ¥             | RabbitMQ                            | Kafka                        |
| ---------------- | ----------------------------------- | ---------------------------- |
| ë©”ì‹œì§€ ì†ì‹¤ ë°©ì§€ | `ack`, `durable queue`, `manualAck` | `acks=all`, `replication`    |
| ì¬ì‹œë„           | `retry`, `dead-letter exchange`     | `retry topic`, `DLT`, `seek` |
| ìˆœì„œ ë³´ì¥        | í ë‹¨ìœ„                             | íŒŒí‹°ì…˜ ë‹¨ìœ„                  |

------

### âœ… 5. ì‹¤ë¬´ í™œìš© ì˜ˆ

| ìš©ë„                     | RabbitMQ | Kafka          |
| ------------------------ | -------- | -------------- |
| ì‚¬ìš©ì ì•Œë¦¼              | âœ…        | ê°€ëŠ¥           |
| ì´ë©”ì¼ í                | âœ…        | ê°€ëŠ¥           |
| ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„         | âŒ        | âœ…              |
| ëŒ€ìš©ëŸ‰ ë°ì´í„° íŒŒì´í”„ë¼ì¸ | âŒ        | âœ…              |
| RPC (Request/Response)   | âœ…        | âŒ              |
| ë³´ì•ˆ ë©”ì‹œì§€ ì²˜ë¦¬         | âœ…        | ì¼ë¶€ êµ¬í˜„ í•„ìš” |

------

### âœ… 6. í…ŒìŠ¤íŠ¸ ë„êµ¬

| ë„êµ¬                      | ì„¤ëª…                                               |
| ------------------------- | -------------------------------------------------- |
| RabbitMQ UI               | `http://localhost:15672` (ê¸°ë³¸ guest/guest)        |
| Kafka CLI                 | `kafka-console-consumer`, `kafka-console-producer` |
| Embedded Kafka (í…ŒìŠ¤íŠ¸ìš©) | `@EmbeddedKafka`                                   |
| TestContainers            | `RabbitMQContainer`, `KafkaContainer`              |

------

### âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©         | RabbitMQ                   | Kafka                        |
| ------------ | -------------------------- | ---------------------------- |
| ì£¼ ì‚¬ìš© ëª©ì  | í, ë©”ì‹œì§€ ë¶„ë°°            | ìŠ¤íŠ¸ë¦¬ë°, ë¡œê·¸ ì²˜ë¦¬          |
| Spring ì—°ë™  | `spring-boot-starter-amqp` | `spring-boot-starter-kafka`  |
| ë©”ì‹œì§€ ëª¨ë¸  | í ê¸°ë°˜ (Ack í•„ìˆ˜)         | ë¡œê·¸ ê¸°ë°˜ (Offset)           |
| ì¥ì          | ì‹ ë¢°ì„±, ì¦‰ì‹œ ì²˜ë¦¬          | ê³ ì†, ê³ ê°€ìš©ì„±, ì €ì¥         |
| ì‹¤ë¬´ ì ìš©    | ì´ë²¤íŠ¸, ë¹„ë™ê¸° ì•Œë¦¼        | ë¡œê·¸ íŒŒì´í”„ë¼ì¸, ì‹¤ì‹œê°„ ë¶„ì„ |

## ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ë° í êµ¬ì„±

Spring Bootì—ì„œ ë©”ì‹œì§€ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•  ë•Œ,
 **ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ(Message Listener)**ì™€ **í(Queue) êµ¬ì„±**ì€ í•µì‹¬ êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤.
 ì•„ë˜ëŠ” **RabbitMQ**ì™€ **Kafka**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë©”ì‹œì§€ ë¦¬ìŠ¤ë‹ ë° í/í† í”½ êµ¬ì„±ì„ **ì‹¤ë¬´ ìˆ˜ì¤€ìœ¼ë¡œ ì •ë¦¬í•œ ê°€ì´ë“œ**ì…ë‹ˆë‹¤.

------

### âœ… 1. RabbitMQ ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ë° í êµ¬ì„±

#### ğŸ“Œ 1-1. ì˜ì¡´ì„± (Spring AMQP)

```
implementation 'org.springframework.boot:spring-boot-starter-amqp'
```

------

#### ğŸ“Œ 1-2. ë©”ì‹œì§€ ìˆ˜ì‹  ë¦¬ìŠ¤ë„ˆ (Consumer)

```
@Component
public class RabbitConsumer {

    @RabbitListener(queues = "my.queue")
    public void receive(String message) {
        System.out.println("ìˆ˜ì‹  ë©”ì‹œì§€: " + message);
    }
}
```

| í‚¤ì›Œë“œ            | ì„¤ëª…                               |
| ----------------- | ---------------------------------- |
| `@RabbitListener` | í•´ë‹¹ íë¡œ ì „ë‹¬ë˜ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹    |
| `queues`          | ì—°ê²°í•  Queue ì´ë¦„ (ë¯¸ë¦¬ ì„ ì–¸ í•„ìš”) |

------

#### ğŸ“Œ 1-3. í/ìµìŠ¤ì²´ì¸ì§€/ë°”ì¸ë”© ì„¤ì •

```
@Configuration
public class RabbitConfig {

    @Bean
    public Queue queue() {
        return new Queue("my.queue", true); // durable
    }

    @Bean
    public DirectExchange exchange() {
        return new DirectExchange("my.exchange");
    }

    @Bean
    public Binding binding() {
        return BindingBuilder.bind(queue())
            .to(exchange())
            .with("my.routing.key");
    }
}
```

| êµ¬ì„±ìš”ì†Œ   | ì„¤ëª…                                                   |
| ---------- | ------------------------------------------------------ |
| `Queue`    | ë©”ì‹œì§€ê°€ ì €ì¥ë˜ëŠ” ì €ì¥ì†Œ                               |
| `Exchange` | ë©”ì‹œì§€ë¥¼ ë¼ìš°íŒ…í•˜ëŠ” í—ˆë¸Œ (`direct`, `topic`, `fanout`) |
| `Binding`  | íì™€ ìµìŠ¤ì²´ì¸ì§€ë¥¼ ì—°ê²° (ë¼ìš°íŒ…í‚¤ í•„ìš”)                 |

------

#### ğŸ“Œ 1-4. ë©”ì‹œì§€ ìë™ ë³€í™˜ (JSON â†’ DTO)

```
@RabbitListener(queues = "my.queue")
public void receive(UserEvent event) {
    System.out.println("User ID: " + event.getUserId());
}
```

> Springì€ Jacksonì„ í†µí•´ JSONì„ DTOë¡œ ìë™ ì—­ì§ë ¬í™”í•¨
>  ë‹¨, `messageConverter` ì„¤ì • í•„ìš” ì—†ì´ ë™ì‘í•˜ëŠ” ê²½ìš°ë„ ìˆìŒ

------

#### ğŸ“Œ 1-5. Ack/Nack ìˆ˜ë™ ì²˜ë¦¬ (ê³ ê¸‰)

```
@RabbitListener(queues = "my.queue", ackMode = "MANUAL")
public void listen(Message message, Channel channel) throws IOException {
    try {
        String body = new String(message.getBody());
        // ì²˜ë¦¬ ì„±ê³µ
        channel.basicAck(message.getMessageProperties().getDeliveryTag(), false);
    } catch (Exception e) {
        // ì‹¤íŒ¨ ì‹œ ì¬ì²˜ë¦¬ or íê¸°
        channel.basicNack(message.getMessageProperties().getDeliveryTag(), false, true);
    }
}
```

------

### âœ… 2. Kafka ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ ë° í† í”½ êµ¬ì„±

#### ğŸ“Œ 2-1. ì˜ì¡´ì„±

```
implementation 'org.springframework.boot:spring-boot-starter-kafka'
```

------

#### ğŸ“Œ 2-2. ë©”ì‹œì§€ ìˆ˜ì‹  ë¦¬ìŠ¤ë„ˆ

```
@Component
public class KafkaConsumer {

    @KafkaListener(topics = "user-topic", groupId = "user-group")
    public void consume(String message) {
        System.out.println("Kafka ìˆ˜ì‹ : " + message);
    }
}
```

| ì†ì„±      | ì„¤ëª…                                                   |
| --------- | ------------------------------------------------------ |
| `topics`  | êµ¬ë…í•  í† í”½ ì´ë¦„                                       |
| `groupId` | ë™ì¼ ê·¸ë£¹ ë‚´ì—ì„  ë©”ì‹œì§€ë¥¼ 1ê°œë§Œ ì²˜ë¦¬ (ë¡œë“œë°¸ëŸ°ì‹± íš¨ê³¼) |

------

#### ğŸ“Œ 2-3. DTO ìˆ˜ì‹  (JSON â†’ ê°ì²´)

```
@KafkaListener(topics = "user-topic", groupId = "user-group", containerFactory = "userKafkaListenerContainerFactory")
public void consume(UserEvent user) {
    System.out.println("User ID: " + user.getUserId());
}
```

```
@Bean
public ConcurrentKafkaListenerContainerFactory<String, UserEvent> userKafkaListenerContainerFactory(
    ConsumerFactory<String, UserEvent> consumerFactory) {
    ConcurrentKafkaListenerContainerFactory<String, UserEvent> factory = new ConcurrentKafkaListenerContainerFactory<>();
    factory.setConsumerFactory(consumerFactory);
    return factory;
}
```

â†’ Jackson ê¸°ë°˜ì˜ ì—­ì§ë ¬í™”ë¥¼ ìœ„í•´ ì„¤ì • í•„ìš”

------

#### ğŸ“Œ 2-4. Kafka í† í”½ ìƒì„± (ê´€ë¦¬ì API ì‚¬ìš© ì‹œ)

```
@Bean
public NewTopic topic() {
    return TopicBuilder.name("user-topic")
        .partitions(3)
        .replicas(1)
        .build();
}
```

- KafkaëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë™ì  í† í”½ ìƒì„±ì„ ì§€ì›í•˜ì§€ë§Œ, ëª…ì‹œì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ê²ƒë„ ì¢‹ìŒ
- íŒŒí‹°ì…˜ ìˆ˜ = ë³‘ë ¬ ì†Œë¹„ ê°€ëŠ¥ ìˆ˜

------

#### ğŸ“Œ 2-5. Offset ìˆ˜ë™ ì»¤ë°‹ ì²˜ë¦¬ (ê³ ê¸‰)

```
spring.kafka.consumer.enable-auto-commit: false
```

```
@KafkaListener(topics = "topic", containerFactory = "manualAckFactory")
public void listen(String message, Acknowledgment ack) {
    try {
        // ì²˜ë¦¬
        ack.acknowledge(); // ìˆ˜ë™ ì»¤ë°‹
    } catch (Exception e) {
        // ì˜ˆì™¸ ì²˜ë¦¬
    }
}
```

------

### âœ… ì‹¤ë¬´ êµ¬ì„± ì „ëµ ìš”ì•½

| í•­ëª©          | RabbitMQ                             | Kafka                          |
| ------------- | ------------------------------------ | ------------------------------ |
| ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ | `@RabbitListener`                    | `@KafkaListener`               |
| í êµ¬ì„±       | `@Bean Queue`, `Exchange`, `Binding` | `@Bean NewTopic`               |
| DTO ìˆ˜ì‹       | JSON ìë™ ì—­ì§ë ¬í™”                   | `containerFactory` í•„ìš”        |
| ë³‘ë ¬ì„±        | ë¦¬ìŠ¤ë„ˆë‹¹ ë‹¤ìˆ˜ ì†Œë¹„ì êµ¬ì„± ê°€ëŠ¥       | íŒŒí‹°ì…˜ ê¸°ë°˜ ìë™ ë³‘ë ¬ ì²˜ë¦¬     |
| ìˆ˜ë™ Ack      | `Channel.basicAck()`                 | `Acknowledgment.acknowledge()` |
| íŠ¸ëœì­ì…˜ ì²˜ë¦¬ | `RabbitTransactionManager`           | `@KafkaListener` + Tx ì„¤ì •     |

------

### âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©             | ì„¤ëª…                                               |
| ---------------- | -------------------------------------------------- |
| ë©”ì‹œì§€ ìˆ˜ì‹       | `@RabbitListener`, `@KafkaListener`ë¡œ ì„ ì–¸         |
| í/í† í”½ êµ¬ì„±     | `@Configuration` ë‚´ì—ì„œ `@Bean`ìœ¼ë¡œ ë“±ë¡           |
| ìˆ˜ì‹  ë©”ì‹œì§€ ì²˜ë¦¬ | ê¸°ë³¸ì€ String, DTOë„ ê°€ëŠ¥ (ì—­ì§ë ¬í™” ì„¤ì • í•„ìš”)     |
| ê³ ê¸‰ ì²˜ë¦¬        | ìˆ˜ë™ Ack, ë³‘ë ¬ ì„¤ì •, DLT êµ¬ì„± ë“± í™•ì¥ ê°€ëŠ¥         |
| ê³µí†µ ì´ì         | ì„œë¹„ìŠ¤ ê°„ ë¹„ë™ê¸° ì—°ë™, í™•ì¥ì„±, ëª¨ë“ˆ ê°„ ê²°í•©ë„ ì œê±° |

## ë©”ì‹œì§€ ì§ë ¬í™” ì „ëµ (JSON, AVRO)

Spring Boot ê¸°ë°˜ì˜ ë©”ì‹œì§€ ê¸°ë°˜ ì‹œìŠ¤í…œì—ì„œ **ë©”ì‹œì§€ ì§ë ¬í™” ì „ëµ**ì€
 **ì„±ëŠ¥, í™•ì¥ì„±, ìƒí˜¸ìš´ìš©ì„±, ìœ ì§€ë³´ìˆ˜ì„±**ì— í° ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤.
 ê°€ì¥ ëŒ€í‘œì ì¸ ì§ë ¬í™” ë°©ì‹ìœ¼ë¡œëŠ” **JSON**ê³¼ **Apache Avro**ê°€ ìˆìœ¼ë©°,
 ì´ë“¤ì€ ì£¼ë¡œ Kafka, RabbitMQ ë“±ì˜ ë¸Œë¡œì»¤ì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤.

------

### âœ… 1. JSON ì§ë ¬í™”

#### ğŸ“Œ ê°œìš”

| í•­ëª© | ì„¤ëª…                                               |
| ---- | -------------------------------------------------- |
| í˜•ì‹ | ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í…ìŠ¤íŠ¸                         |
| ì¥ì  | ê°„ë‹¨í•¨, ë””ë²„ê¹… ì‰¬ì›€, ê±°ì˜ ëª¨ë“  ì–¸ì–´ì—ì„œ ì§€ì›       |
| ë‹¨ì  | **ë°”ì´íŠ¸ í¬ê¸° í¼**, **ìŠ¤í‚¤ë§ˆ ì—†ìŒ**, íƒ€ì… ë¶ˆëª…í™•ì„± |

------

#### ğŸ“Œ Spring Kafkaì—ì„œ JSON ì§ë ¬í™” ì„¤ì •

#### ì˜ì¡´ì„±

```
implementation 'org.springframework.kafka:spring-kafka'
```

------

#### application.yml ì„¤ì •

```
spring.kafka:
  producer:
    value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
  consumer:
    value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
    properties:
      spring.json.trusted.packages: "*"
```

------

#### DTO í´ë˜ìŠ¤ ì˜ˆì‹œ

```
@Data
@AllArgsConstructor
@NoArgsConstructor
public class UserEvent {
    private Long id;
    private String name;
}
```

------

#### KafkaTemplate ì‚¬ìš©

```
kafkaTemplate.send("user-topic", new UserEvent(1L, "kim"));
```

------

#### ğŸ“Œ ìˆ˜ì‹  ì¸¡ ë¦¬ìŠ¤ë„ˆ

```
@KafkaListener(topics = "user-topic", groupId = "user-group")
public void consume(UserEvent event) {
    System.out.println("ìˆ˜ì‹  ì´ë²¤íŠ¸: " + event.getName());
}
```

------

### âœ… 2. AVRO ì§ë ¬í™”

#### ğŸ“Œ ê°œìš”

| í•­ëª© | ì„¤ëª…                                               |
| ---- | -------------------------------------------------- |
| í˜•ì‹ | ì´ì§„ í¬ë§· + ìŠ¤í‚¤ë§ˆ                                 |
| ì¥ì  | **ì‘ê³  ë¹ ë¦„**, **íƒ€ì… ëª…í™•**, **ìŠ¤í‚¤ë§ˆ ì§„í™” ê°€ëŠ¥** |
| ë‹¨ì  | ë””ë²„ê¹… ì–´ë ¤ì›€, ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ í•„ìš”, JSONë³´ë‹¤ ë³µì¡     |

------

#### ğŸ“Œ ì˜ì¡´ì„± (Confluent Avro ì‚¬ìš© ì‹œ)

```
implementation 'io.confluent:kafka-avro-serializer:7.5.0'
implementation 'org.apache.avro:avro:1.11.1'
```

------

#### ğŸ“Œ application.yml ì„¤ì • (Schema Registry ì‚¬ìš© ê°€ì •)

```
spring.kafka:
  producer:
    value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer
  consumer:
    value-deserializer: io.confluent.kafka.serializers.KafkaAvroDeserializer
  properties:
    schema.registry.url: http://localhost:8081
    specific.avro.reader: true
```

------

#### ğŸ“Œ Avro ìŠ¤í‚¤ë§ˆ ì •ì˜ (user_event.avsc)

```
{
  "type": "record",
  "name": "UserEvent",
  "namespace": "com.example",
  "fields": [
    {"name": "id", "type": "long"},
    {"name": "name", "type": "string"}
  ]
}
```

â†’ `avro-maven-plugin`ì„ ì‚¬ìš©í•´ Java í´ë˜ìŠ¤ ìë™ ìƒì„± ê°€ëŠ¥

------

#### ğŸ“Œ ë©”ì‹œì§€ ì „ì†¡

```
UserEvent event = UserEvent.newBuilder()
    .setId(1L)
    .setName("kim")
    .build();

kafkaTemplate.send("user-avro-topic", event);
```

------

#### ğŸ“Œ ë©”ì‹œì§€ ìˆ˜ì‹ 

```
@KafkaListener(topics = "user-avro-topic")
public void listen(UserEvent event) {
    System.out.println("AVRO ì´ë²¤íŠ¸ ìˆ˜ì‹ : " + event.getName());
}
```

------

### âœ… 3. JSON vs AVRO ë¹„êµ

| í•­ëª©        | **JSON**         | **AVRO**                |
| ----------- | ---------------- | ----------------------- |
| í˜•ì‹        | í…ìŠ¤íŠ¸           | ë°”ì´ë„ˆë¦¬                |
| ê°€ë…ì„±      | âœ… ë†’ìŒ           | âŒ ë‚®ìŒ                  |
| í¬ê¸°        | ë¹„êµì  í¼        | ë§¤ìš° ì‘ìŒ               |
| ì†ë„        | ëŠë¦¼             | ë¹ ë¦„                    |
| ìŠ¤í‚¤ë§ˆ í•„ìš” | âŒ ì—†ìŒ           | âœ… í•„ìš”                  |
| íƒ€ì… ì•ˆì „ì„± | ì•½í•¨             | ê°•í•¨                    |
| ë²„ì „ ê´€ë¦¬   | ë¶ˆí¸             | ìŠ¤í‚¤ë§ˆ ì§„í™”ë¡œ ìœ ì—°í•¨    |
| ì¶”ì²œ ì‚¬ìš©ì²˜ | ë””ë²„ê¹…, ë‚´ë¶€ API | ëŒ€ìš©ëŸ‰ ë¡œê·¸, MSA ì´ë²¤íŠ¸ |

------

### âœ… 4. Spring ì‹¤ë¬´ ì „ëµ

| ìƒí™©                       | ê¶Œì¥ ì§ë ¬í™”                                    |
| -------------------------- | ---------------------------------------------- |
| ë‚´ë¶€ ì„œë¹„ìŠ¤, ë¹ ë¥¸ ê°œë°œ     | JSON ì§ë ¬í™” (`JsonSerializer`)                 |
| ëŒ€ìš©ëŸ‰ ìŠ¤íŠ¸ë¦¬ë°, ë¡œê·¸ ìˆ˜ì§‘ | AVRO (`KafkaAvroSerializer` + Schema Registry) |
| ì™¸ë¶€ ì—°ë™ API              | JSON (ë²”ìš©ì„±)                                  |
| ì´ë²¤íŠ¸ ìŠ¤í† ì–´              | AVRO ë˜ëŠ” Protobuf                             |

------

### âœ… 5. í…ŒìŠ¤íŠ¸ ë„êµ¬ ë° íŒ

| ë„êµ¬             | ì„¤ëª…                                  |
| ---------------- | ------------------------------------- |
| `KafkaTemplate`  | ë©”ì‹œì§€ ì „ì†¡                           |
| `@KafkaListener` | ë©”ì‹œì§€ ìˆ˜ì‹                            |
| Schema Registry  | AVRO ìŠ¤í‚¤ë§ˆ ë“±ë¡/ì§„í™”                 |
| Confluent UI     | í† í”½ ë©”ì‹œì§€ í™•ì¸                      |
| JSON ë””ì½”ë”      | `jq`, Postman                         |
| AVRO ë””ì½”ë”      | `avro-tools`, `kcat`, IntelliJ Plugin |

------

### âœ… ê²°ë¡  ìš”ì•½

| í•­ëª©        | ì„¤ëª…                                                         |
| ----------- | ------------------------------------------------------------ |
| JSON        | ê°„ë‹¨í•˜ê³  ì‰¬ì›€. ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆìŒ. ì„±ëŠ¥ì€ ë‚®ìŒ              |
| AVRO        | ë¹ ë¥´ê³  ì‘ê³  íƒ€ì… ì•ˆì „. ì´ˆê¸° í•™ìŠµ í•„ìš”, ìŠ¤í‚¤ë§ˆ ê´€ë¦¬ í•„ìš”      |
| Spring ì—°ë™ | Kafka: `JsonSerializer`, `KafkaAvroSerializer` ì„¤ì •ìœ¼ë¡œ ì²˜ë¦¬ |
| ì‹¤ë¬´ ì „ëµ   | ë””ë²„ê¹…/ê°„ë‹¨ êµ¬ì¡°ëŠ” JSON, ê³ ì„±ëŠ¥/ëŒ€ê·œëª¨ ì‹œìŠ¤í…œì€ AVRO         |

